import os

# This test used to fail because __COMPAT_LAYER was found in environment variables.
#
# This environment variable is added by the system to indicate to the process that it is
# registered as a AppCompatFlags as explained in this article:
#
# http://stackoverflow.com/questions/5600735/how-do-i-fix-win7-app-compatibility-shim-with-disableusercallbackexception

environ = os.environ.copy()
environ.pop('__COMPAT_LAYER', None)

for i, j in environ.iteritems():
    print "testExecuteAndEnviron: %s: %s" % (i, j)
